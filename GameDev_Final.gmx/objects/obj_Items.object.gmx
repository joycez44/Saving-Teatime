<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>selected = 0
money = 10000

speech = "Hiya! Welcome to my humble bakery! We've got all the candies and pastries you could ever want... or eat!"

selectionChanged = false
prevSelect = 0
length = 0;
current = 1

shieldIcon = instance_create(65, 155, obj_Icon);
shieldIcon.sprite_index = spr_Invincible

floatIcon = instance_create(65, 255, obj_Icon);
floatIcon.sprite_index = spr_Umbrella

floorIcon = instance_create(65, 355, obj_Icon);
floorIcon.sprite_index = spr_Umbrella

ini_open("teatime.ini");
shield_price = ini_read_real("prices", "shield", 100)
float_price = ini_read_real("prices", "float", 100)
floor_price = ini_read_real("prices", "floor", 100)

shield_level = ini_read_real("levels", "shield", 1)
float_level = ini_read_real("levels", "float", 1)
floor_level = ini_read_real("levels", "floor", 1)
ini_close();


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font(fnt_MenuText_S)
draw_set_color(c_white)
draw_set_halign(fa_left)

draw_text(50, 70, money)
instance_create(180, 96, obj_SugarCube);

//Options
if (selected == 0)  {
    draw_set_color(global.c_pink)
    //speech = "The invincible strawberry lollipop! These things are you can "
    
    shieldIcon.selected = true;
    floatIcon.selected = false;
    floorIcon.selected = false;
}
else {
    draw_set_color(c_white);
    shieldIcon.y = 155
}
/*
if (selected != 0) {
    draw_set_color(global.c_pink)
    draw_text(100, 133, "Biscuit " + string(shield_level) + "/5")
    draw_set_color(c_white)
}
*/
draw_text(100, 130, "Biscuit " + string(shield_level) + "/5")
draw_set_halign(fa_right)
draw_text(510, 130, string(shield_price))
instance_create(535, 155, obj_SugarCube);
draw_set_halign(fa_left)
draw_set_font(fnt_ShopDetails)
draw_text(50, 180, "Increases duration of shield power-up.")

draw_set_font(fnt_MenuText_S)
if (selected == 1)  {
    draw_set_color(global.c_pink)
    //speech = "They're just normal cream puffs, but stuff sells better when you give 'em fancy names. Eating them can make you lighter... I think."
    
    shieldIcon.selected = false;
    floatIcon.selected = true;
    floorIcon.selected = false;
}
else {
    draw_set_color(c_white);
    floatIcon.y = 255
}
/*
if (selected != 1) {
    draw_set_color(global.c_pink)
    draw_text(100, 233, "Choux Creme " + string(float_level) + "/5")
    draw_set_color(c_white)
}
*/
draw_text(100, 230, "Choux Creme " + string(float_level) + "/5")
draw_set_halign(fa_right)
draw_text(510, 230, string(float_price))
instance_create(535, 255, obj_SugarCube);
draw_set_halign(fa_left)
draw_set_font(fnt_ShopDetails)
draw_text(50, 280, "Increases duration of floating powerup.")

draw_set_font(fnt_MenuText_S)
if (selected == 2)  {
    draw_set_color(global.c_pink)
    //speech = "Honey's pretty great, and we've got the sweetest, stickiest you'll find this side of Sugar Mountain! You could probably build a house with this stuff."
    
    shieldIcon.selected = false;
    floatIcon.selected = false;
    floorIcon.selected = true;
}
else {
    draw_set_color(c_white);
    floorIcon.y = 355
}
/*
if (selected != 2) {
    draw_set_color(global.c_pink)
    draw_text(105, 333, "Honey " + string(floor_level) + "/5")
    draw_set_color(c_white)
}
*/
draw_text(105, 330, "Honey " + string(floor_level) + "/5")
draw_set_halign(fa_right)
draw_text(510, 330, string(floor_price))
instance_create(535, 355, obj_SugarCube);
draw_set_halign(fa_left)
draw_set_font(fnt_ShopDetails)
draw_text(50, 380, "Collapsing floors will last longer before falling.")

if (selected == 3)  {
    draw_set_color(global.c_pink)
    //speech = "Aaaw... Leaving already?"
    
    shieldIcon.selected = false;
    floatIcon.selected = false;
    floorIcon.selected = false;
}
else {
    draw_set_color(c_white);
}
draw_set_font(fnt_MenuText_S)
draw_text(55, 425, "Back to Map")

//draw_text(50, 600, tooltip);

//Draw shopkeeper text
length = string_length(speech)
draw_set_font(fnt_ShopSpeech)
draw_text_ext(645, 80, string_copy(speech, 0, current), 50, 350);
++current;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="87">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (selected &gt; 0) {
    current = selected - 1 
    /*
    while (current &gt; 0) {
        
        if (money &gt; price[current - 1]) {
            break
        }
        --current
    }
    */
    selected = current
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="83">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (selected &lt; 3) {
    current = selected + 1 
    /*
    while (current &lt; 5) {
        if (current == 4) {
        //if (current == 4 || money &gt; price[current - 1]) {
            break
        }
        ++current
    }
    */
    selected = current
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (selected == 0) {
    //shield
    //
    price = shield_price
    //level = sheild_level
    
    if (money &gt; price) {
        ini_open("teatime.ini");
        
        new = ini_read_real("upgrades", "shield", 5 ) + 1;
        ini_write_real("upgrades", "shield", new);
    
        shield_level += 1
        shield_price = 100 * shield_level
    
        ini_write_real("prices", "shield", shield_price);
        ini_write_real("levels", "shield", shield_level);
        ini_close();
        
        money -= price;
    }
    
}

else if (selected == 1) {
    price = float_price
    //level = ini_read_real("levels", "float", 1)
    
    if (money &gt; price) {
        ini_open("teatime.ini");
        
        new = ini_read_real("upgrades", "float", 3) + 1;
        ini_write_real("upgrades", "float", new);
        
        float_level += 1
        float_price = 100 * float_level
    
        ini_write_real("prices", "float", float_price);
        ini_write_real("levels", "float", float_level);
        ini_close();        
    }

    money -= price;
}

else if (selected == 2) {
    price = floor_price
    //level = ini_read_real("levels", "floor", 1)
    
    if (money &gt; price) {
        ini_open("teatime.ini");
        
        new = ini_read_real("upgrades", "floor", .5 ) + .5;
        ini_write_real("upgrades", "floor", new);

        floor_level += 1
        floor_price = 100 * floor_level
        
        ini_write_real("prices", "floor", floor_price);
        ini_write_real("levels", "floor", floor_level);
        ini_close(); 
    }
    money -= price;
}

else {
    room_goto(rm_Map)
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
